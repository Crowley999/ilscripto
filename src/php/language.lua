local php = {}

php.opts = {}

local contLangCode = 'zh'
local localLanguageNames = {
  ["aa"] = "Qafár af",
  ["ab"] = "Аҧсшәа",
  ["abs"] = "bahasa ambon",
  ["ace"] = "Acèh",
  ["ady"] = "адыгабзэ",
  ["ady-cyrl"] = "адыгабзэ",
  ["aeb"] = "تونسي/Tûnsî",
  ["aeb-arab"] = "تونسي",
  ["aeb-latn"] = "Tûnsî",
  ["af"] = "Afrikaans",
  ["ak"] = "Akan",
  ["aln"] = "Gegë",
  ["als"] = "Alemannisch",
  ["alt"] = "алтай тил",
  ["am"] = "አማርኛ",
  ["ami"] = "Pangcah",
  ["an"] = "aragonés",
  ["ang"] = "Ænglisc",
  ["anp"] = "अङ्गिका",
  ["ar"] = "العربية",
  ["arc"] = "ܐܪܡܝܐ",
  ["arn"] = "mapudungun",
  ["arq"] = "جازايرية",
  ["ary"] = "الدارجة",
  ["arz"] = "مصرى",
  ["as"] = "অসমীয়া",
  ["ase"] = "American sign language",
  ["ast"] = "asturianu",
  ["atj"] = "Atikamekw",
  ["av"] = "авар",
  ["avk"] = "Kotava",
  ["awa"] = "अवधी",
  ["ay"] = "Aymar aru",
  ["az"] = "azərbaycanca",
  ["azb"] = "تۆرکجه",
  ["ba"] = "башҡортса",
  ["ban"] = "Basa Bali",
  ["ban-bali"] = "ᬩᬲᬩᬮᬶ",
  ["bar"] = "Boarisch",
  ["bat-smg"] = "žemaitėška",
  ["bbc"] = "Batak Toba",
  ["bbc-latn"] = "Batak Toba",
  ["bcc"] = "جهلسری بلوچی",
  ["bcl"] = "Bikol Central",
  ["be"] = "беларуская",
  ["be-tarask"] = "беларуская (тарашкевіца)",
  ["be-x-old"] = "беларуская (тарашкевіца)",
  ["bg"] = "български",
  ["bgn"] = "روچ کپتین بلوچی",
  ["bh"] = "भोजपुरी",
  ["bho"] = "भोजपुरी",
  ["bi"] = "Bislama",
  ["bjn"] = "Banjar",
  ["bm"] = "bamanankan",
  ["bn"] = "বাংলা",
  ["bo"] = "བོད་ཡིག",
  ["bpy"] = "বিষ্ণুপ্রিয়া মণিপুরী",
  ["bqi"] = "بختیاری",
  ["br"] = "brezhoneg",
  ["brh"] = "Bráhuí",
  ["bs"] = "bosanski",
  ["btm"] = "Batak Mandailing",
  ["bto"] = "Iriga Bicolano",
  ["bug"] = "ᨅᨔ ᨕᨘᨁᨗ",
  ["bxr"] = "буряад",
  ["ca"] = "català",
  ["cbk-zam"] = "Chavacano de Zamboanga",
  ["cdo"] = "Mìng-dĕ̤ng-ngṳ̄",
  ["ce"] = "нохчийн",
  ["ceb"] = "Cebuano",
  ["ch"] = "Chamoru",
  ["cho"] = "Choctaw",
  ["chr"] = "ᏣᎳᎩ",
  ["chy"] = "Tsetsêhestâhese",
  ["ckb"] = "کوردی",
  ["co"] = "corsu",
  ["cps"] = "Capiceño",
  ["cr"] = "Nēhiyawēwin / ᓀᐦᐃᔭᐍᐏᐣ",
  ["crh"] = "qırımtatarca",
  ["crh-cyrl"] = "къырымтатарджа (Кирилл)",
  ["crh-latn"] = "qırımtatarca (Latin)",
  ["cs"] = "čeština",
  ["csb"] = "kaszëbsczi",
  ["cu"] = "словѣньскъ / ⰔⰎⰑⰂⰡⰐⰠⰔⰍⰟ",
  ["cv"] = "Чӑвашла",
  ["cy"] = "Cymraeg",
  ["da"] = "dansk",
  ["dag"] = "dagbanli",
  ["de"] = "Deutsch",
  ["de-at"] = "Österreichisches Deutsch",
  ["de-ch"] = "Schweizer Hochdeutsch",
  ["de-formal"] = "Deutsch (Sie-Form)",
  ["din"] = "Thuɔŋjäŋ",
  ["diq"] = "Zazaki",
  ["dsb"] = "dolnoserbski",
  ["dtp"] = "Dusun Bundu-liwan",
  ["dty"] = "डोटेली",
  ["dv"] = "ދިވެހިބަސް",
  ["dz"] = "ཇོང་ཁ",
  ["ee"] = "eʋegbe",
  ["egl"] = "Emiliàn",
  ["el"] = "Ελληνικά",
  ["eml"] = "emiliàn e rumagnòl",
  ["en"] = "English",
  ["en-ca"] = "Canadian English",
  ["en-gb"] = "British English",
  ["eo"] = "Esperanto",
  ["es"] = "español",
  ["es-419"] = "español de América Latina",
  ["es-formal"] = "español (formal)",
  ["et"] = "eesti",
  ["eu"] = "euskara",
  ["ext"] = "estremeñu",
  ["fa"] = "فارسی",
  ["ff"] = "Fulfulde",
  ["fi"] = "suomi",
  ["fit"] = "meänkieli",
  ["fiu-vro"] = "võro",
  ["fj"] = "Na Vosa Vakaviti",
  ["fo"] = "føroyskt",
  ["fr"] = "français",
  ["frc"] = "français cadien",
  ["frp"] = "arpetan",
  ["frr"] = "Nordfriisk",
  ["fur"] = "furlan",
  ["fy"] = "Frysk",
  ["ga"] = "Gaeilge",
  ["gag"] = "Gagauz",
  ["gan"] = "贛語",
  ["gan-hans"] = "赣语（简体）",
  ["gan-hant"] = "贛語（繁體）",
  ["gcr"] = "kriyòl gwiyannen",
  ["gd"] = "Gàidhlig",
  ["gl"] = "galego",
  ["glk"] = "گیلکی",
  ["gn"] = "Avañe'ẽ",
  ["gom"] = "गोंयची कोंकणी / Gõychi Konknni",
  ["gom-deva"] = "गोंयची कोंकणी",
  ["gom-latn"] = "Gõychi Konknni",
  ["gor"] = "Bahasa Hulontalo",
  ["got"] = "𐌲𐌿𐍄𐌹𐍃𐌺",
  ["grc"] = "Ἀρχαία ἑλληνικὴ",
  ["gsw"] = "Alemannisch",
  ["gu"] = "ગુજરાતી",
  ["guc"] = "wayuunaiki",
  ["guw"] = "gungbe",
  ["gv"] = "Gaelg",
  ["ha"] = "Hausa",
  ["hak"] = "客家語/Hak-kâ-ngî",
  ["haw"] = "Hawaiʻi",
  ["he"] = "עברית",
  ["hi"] = "हिन्दी",
  ["hif"] = "Fiji Hindi",
  ["hif-latn"] = "Fiji Hindi",
  ["hil"] = "Ilonggo",
  ["ho"] = "Hiri Motu",
  ["hr"] = "hrvatski",
  ["hrx"] = "Hunsrik",
  ["hsb"] = "hornjoserbsce",
  ["ht"] = "Kreyòl ayisyen",
  ["hu"] = "magyar",
  ["hu-formal"] = "magyar (formal)",
  ["hy"] = "հայերեն",
  ["hyw"] = "Արեւմտահայերէն",
  ["hz"] = "Otsiherero",
  ["ia"] = "interlingua",
  ["id"] = "Bahasa Indonesia",
  ["ie"] = "Interlingue",
  ["ig"] = "Igbo",
  ["ii"] = "ꆇꉙ",
  ["ik"] = "Iñupiak",
  ["ike-cans"] = "ᐃᓄᒃᑎᑐᑦ",
  ["ike-latn"] = "inuktitut",
  ["ilo"] = "Ilokano",
  ["inh"] = "ГӀалгӀай",
  ["io"] = "Ido",
  ["is"] = "íslenska",
  ["it"] = "italiano",
  ["iu"] = "ᐃᓄᒃᑎᑐᑦ/inuktitut",
  ["ja"] = "日本語",
  ["jam"] = "Patois",
  ["jbo"] = "la .lojban.",
  ["jut"] = "jysk",
  ["jv"] = "Jawa",
  ["ka"] = "ქართული",
  ["kaa"] = "Qaraqalpaqsha",
  ["kab"] = "Taqbaylit",
  ["kbd"] = "Адыгэбзэ",
  ["kbd-cyrl"] = "Адыгэбзэ",
  ["kbp"] = "Kabɩyɛ",
  ["kcg"] = "Tyap",
  ["kg"] = "Kongo",
  ["khw"] = "کھوار",
  ["ki"] = "Gĩkũyũ",
  ["kiu"] = "Kırmancki",
  ["kj"] = "Kwanyama",
  ["kjp"] = "ဖၠုံလိက်",
  ["kk"] = "қазақша",
  ["kk-arab"] = "قازاقشا (تٴوتە)",
  ["kk-cn"] = "قازاقشا (جۇنگو)",
  ["kk-cyrl"] = "қазақша (кирил)",
  ["kk-kz"] = "қазақша (Қазақстан)",
  ["kk-latn"] = "qazaqşa (latın)",
  ["kk-tr"] = "qazaqşa (Türkïya)",
  ["kl"] = "kalaallisut",
  ["km"] = "ភាសាខ្មែរ",
  ["kn"] = "ಕನ್ನಡ",
  ["ko"] = "한국어",
  ["ko-kp"] = "조선말",
  ["koi"] = "перем коми",
  ["kr"] = "Kanuri",
  ["krc"] = "къарачай-малкъар",
  ["kri"] = "Krio",
  ["krj"] = "Kinaray-a",
  ["krl"] = "karjal",
  ["ks"] = "कॉशुर / کٲشُر",
  ["ks-arab"] = "کٲشُر",
  ["ks-deva"] = "कॉशुर",
  ["ksh"] = "Ripoarisch",
  ["ku"] = "kurdî",
  ["ku-arab"] = "كوردي (عەرەبی)",
  ["ku-latn"] = "kurdî (latînî)",
  ["kum"] = "къумукъ",
  ["kv"] = "коми",
  ["kw"] = "kernowek",
  ["ky"] = "Кыргызча",
  ["la"] = "Latina",
  ["lad"] = "Ladino",
  ["lb"] = "Lëtzebuergesch",
  ["lbe"] = "лакку",
  ["lez"] = "лезги",
  ["lfn"] = "Lingua Franca Nova",
  ["lg"] = "Luganda",
  ["li"] = "Limburgs",
  ["lij"] = "Ligure",
  ["liv"] = "Līvõ kēļ",
  ["lki"] = "لەکی",
  ["lld"] = "Ladin",
  ["lmo"] = "lombard",
  ["ln"] = "lingála",
  ["lo"] = "ລາວ",
  ["loz"] = "Silozi",
  ["lrc"] = "لۊری شومالی",
  ["lt"] = "lietuvių",
  ["ltg"] = "latgaļu",
  ["lus"] = "Mizo ţawng",
  ["luz"] = "لئری دوٙمینی",
  ["lv"] = "latviešu",
  ["lzh"] = "文言",
  ["lzz"] = "Lazuri",
  ["mad"] = "Madhurâ",
  ["mai"] = "मैथिली",
  ["map-bms"] = "Basa Banyumasan",
  ["mdf"] = "мокшень",
  ["mg"] = "Malagasy",
  ["mh"] = "Ebon",
  ["mhr"] = "олык марий",
  ["mi"] = "Māori",
  ["min"] = "Minangkabau",
  ["mk"] = "македонски",
  ["ml"] = "മലയാളം",
  ["mn"] = "монгол",
  ["mni"] = "ꯃꯤꯇꯩ ꯂꯣꯟ",
  ["mnw"] = "ဘာသာ မန်",
  ["mo"] = "молдовеняскэ",
  ["mr"] = "मराठी",
  ["mrh"] = "Mara",
  ["mrj"] = "кырык мары",
  ["ms"] = "Bahasa Melayu",
  ["ms-arab"] = "بهاس ملايو",
  ["mt"] = "Malti",
  ["mus"] = "Mvskoke",
  ["mwl"] = "Mirandés",
  ["my"] = "မြန်မာဘာသာ",
  ["myv"] = "эрзянь",
  ["mzn"] = "مازِرونی",
  ["na"] = "Dorerin Naoero",
  ["nah"] = "Nāhuatl",
  ["nan"] = "Bân-lâm-gú",
  ["nap"] = "Napulitano",
  ["nb"] = "norsk bokmål",
  ["nds"] = "Plattdüütsch",
  ["nds-nl"] = "Nedersaksies",
  ["ne"] = "नेपाली",
  ["new"] = "नेपाल भाषा",
  ["ng"] = "Oshiwambo",
  ["nia"] = "Li Niha",
  ["niu"] = "Niuē",
  ["nl"] = "Nederlands",
  ["nl-informal"] = "Nederlands (informeel)",
  ["nn"] = "norsk nynorsk",
  ["no"] = "norsk",
  ["nov"] = "Novial",
  ["nqo"] = "ߒߞߏ",
  ["nrm"] = "Nouormand",
  ["nso"] = "Sesotho sa Leboa",
  ["nv"] = "Diné bizaad",
  ["ny"] = "Chi-Chewa",
  ["nys"] = "Nyunga",
  ["oc"] = "occitan",
  ["ojb"] = "Ojibwemowin",
  ["olo"] = "livvinkarjala",
  ["om"] = "Oromoo",
  ["or"] = "ଓଡ଼ିଆ",
  ["os"] = "Ирон",
  ["pa"] = "ਪੰਜਾਬੀ",
  ["pag"] = "Pangasinan",
  ["pam"] = "Kapampangan",
  ["pap"] = "Papiamentu",
  ["pcd"] = "Picard",
  ["pdc"] = "Deitsch",
  ["pdt"] = "Plautdietsch",
  ["pfl"] = "Pälzisch",
  ["pi"] = "पालि",
  ["pih"] = "Norfuk / Pitkern",
  ["pl"] = "polski",
  ["pms"] = "Piemontèis",
  ["pnb"] = "پنجابی",
  ["pnt"] = "Ποντιακά",
  ["prg"] = "Prūsiskan",
  ["ps"] = "پښتو",
  ["pt"] = "português",
  ["pt-br"] = "português do Brasil",
  ["pwn"] = "pinayuanan",
  ["qu"] = "Runa Simi",
  ["qug"] = "Runa shimi",
  ["rgn"] = "Rumagnôl",
  ["rif"] = "Tarifit",
  ["rm"] = "rumantsch",
  ["rmc"] = "romaňi čhib",
  ["rmy"] = "romani čhib",
  ["rn"] = "Kirundi",
  ["ro"] = "română",
  ["roa-rup"] = "armãneashti",
  ["roa-tara"] = "tarandíne",
  ["ru"] = "русский",
  ["rue"] = "русиньскый",
  ["rup"] = "armãneashti",
  ["ruq"] = "Vlăheşte",
  ["ruq-cyrl"] = "Влахесте",
  ["ruq-latn"] = "Vlăheşte",
  ["rw"] = "Ikinyarwanda",
  ["sa"] = "संस्कृतम्",
  ["sah"] = "саха тыла",
  ["sat"] = "ᱥᱟᱱᱛᱟᱲᱤ",
  ["sc"] = "sardu",
  ["scn"] = "sicilianu",
  ["sco"] = "Scots",
  ["sd"] = "سنڌي",
  ["sdc"] = "Sassaresu",
  ["sdh"] = "کوردی خوارگ",
  ["se"] = "davvisámegiella",
  ["sei"] = "Cmique Itom",
  ["ses"] = "Koyraboro Senni",
  ["sg"] = "Sängö",
  ["sgs"] = "žemaitėška",
  ["sh"] = "srpskohrvatski / српскохрватски",
  ["shi"] = "Taclḥit",
  ["shi-latn"] = "Taclḥit",
  ["shi-tfng"] = "ⵜⴰⵛⵍⵃⵉⵜ",
  ["shn"] = "ၽႃႇသႃႇတႆး ",
  ["shy"] = "tacawit",
  ["shy-latn"] = "tacawit",
  ["si"] = "සිංහල",
  ["simple"] = "Simple English",
  ["sk"] = "slovenčina",
  ["skr"] = "سرائیکی",
  ["skr-arab"] = "سرائیکی",
  ["sl"] = "slovenščina",
  ["sli"] = "Schläsch",
  ["sm"] = "Gagana Samoa",
  ["sma"] = "åarjelsaemien",
  ["smn"] = "anarâškielâ",
  ["sn"] = "chiShona",
  ["so"] = "Soomaaliga",
  ["sq"] = "shqip",
  ["sr"] = "српски / srpski",
  ["sr-ec"] = "српски (ћирилица)",
  ["sr-el"] = "srpski (latinica)",
  ["srn"] = "Sranantongo",
  ["ss"] = "SiSwati",
  ["st"] = "Sesotho",
  ["stq"] = "Seeltersk",
  ["sty"] = "себертатар",
  ["su"] = "Sunda",
  ["sv"] = "svenska",
  ["sw"] = "Kiswahili",
  ["szl"] = "ślůnski",
  ["szy"] = "Sakizaya",
  ["ta"] = "தமிழ்",
  ["tay"] = "Tayal",
  ["tcy"] = "ತುಳು",
  ["te"] = "తెలుగు",
  ["tet"] = "tetun",
  ["tg"] = "тоҷикӣ",
  ["tg-cyrl"] = "тоҷикӣ",
  ["tg-latn"] = "tojikī",
  ["th"] = "ไทย",
  ["ti"] = "ትግርኛ",
  ["tk"] = "Türkmençe",
  ["tl"] = "Tagalog",
  ["tly"] = "tolışi",
  ["tly-cyrl"] = "толыши",
  ["tn"] = "Setswana",
  ["to"] = "lea faka-Tonga",
  ["tpi"] = "Tok Pisin",
  ["tr"] = "Türkçe",
  ["tru"] = "Ṫuroyo",
  ["trv"] = "Seediq",
  ["ts"] = "Xitsonga",
  ["tt"] = "татарча/tatarça",
  ["tt-cyrl"] = "татарча",
  ["tt-latn"] = "tatarça",
  ["tum"] = "chiTumbuka",
  ["tw"] = "Twi",
  ["ty"] = "reo tahiti",
  ["tyv"] = "тыва дыл",
  ["tzm"] = "ⵜⴰⵎⴰⵣⵉⵖⵜ",
  ["udm"] = "удмурт",
  ["ug"] = "ئۇيغۇرچە / Uyghurche",
  ["ug-arab"] = "ئۇيغۇرچە",
  ["ug-latn"] = "Uyghurche",
  ["uk"] = "українська",
  ["ur"] = "اردو",
  ["uz"] = "oʻzbekcha/ўзбекча",
  ["uz-cyrl"] = "ўзбекча",
  ["uz-latn"] = "oʻzbekcha",
  ["ve"] = "Tshivenda",
  ["vec"] = "vèneto",
  ["vep"] = "vepsän kel’",
  ["vi"] = "Tiếng Việt",
  ["vls"] = "West-Vlams",
  ["vmf"] = "Mainfränkisch",
  ["vo"] = "Volapük",
  ["vot"] = "Vaďďa",
  ["vro"] = "võro",
  ["wa"] = "walon",
  ["war"] = "Winaray",
  ["wls"] = "Fakaʻuvea",
  ["wo"] = "Wolof",
  ["wuu"] = "吴语",
  ["xal"] = "хальмг",
  ["xh"] = "isiXhosa",
  ["xmf"] = "მარგალური",
  ["xsy"] = "saisiyat",
  ["yi"] = "ייִדיש",
  ["yo"] = "Yorùbá",
  ["yue"] = "粵語",
  ["za"] = "Vahcuengh",
  ["zea"] = "Zeêuws",
  ["zgh"] = "ⵜⴰⵎⴰⵣⵉⵖⵜ ⵜⴰⵏⴰⵡⴰⵢⵜ",
  ["zh"] = "中文",
  ["zh-classical"] = "文言",
  ["zh-cn"] = "中文（中国大陆）",
  ["zh-hans"] = "中文（简体）",
  ["zh-hant"] = "中文（繁體）",
  ["zh-hk"] = "中文（香港）",
  ["zh-min-nan"] = "Bân-lâm-gú",
  ["zh-mo"] = "中文（澳門）",
  ["zh-my"] = "中文（马来西亚）",
  ["zh-sg"] = "中文（新加坡）",
  ["zh-tw"] = "中文（台灣）",
  ["zh-yue"] = "粵語",
  ["zu"] = "isiZulu",
}
-- generated by "grep -e '$fallback ' Messages*.php" in mediawiki-core/languages/messages
local fallbacks = {
  ["ab"]={'ru','en'},
  ["abs"]={'id','en'},
  ["ace"]={'id','en'},
  ["ady"]={'ady-cyrl','en'},
  ["aeb"]={'aeb-arab','en'},
  ["aeb-arab"]={'ar','en'},
  ["aln"]={'sq','en'},
  ["alt"]={'ru','en'},
  ["ami"]={'zh-hant','en'},
  ["an"]={'es','en'},
  ["anp"]={'hi','en'},
  ["arn"]={'es','en'},
  ["arq"]={'ar','en'},
  ["ary"]={'ar','en'},
  ["arz"]={'ar','en'},
  ["ast"]={'es','en'},
  ["atj"]={'fr','en'},
  ["av"]={'ru','en'},
  ["avk"]={'fr','es','ru','en'},
  ["awa"]={'hi','en'},
  ["ay"]={'es','en'},
  ["azb"]={'fa','en'},
  ["ba"]={'ru','en'},
  ["ban"]={'id','en'},
  ["ban-bali"]={'ban','en'},
  ["bar"]={'de','en'},
  ["bbc"]={'bbc-latn','en'},
  ["bbc-latn"]={'id','en'},
  ["bcc"]={'fa','en'},
  ["bci"]={'fr','en'},
  ["be-tarask"]={'be','en'},
  ["bgn"]={'fa','en'},
  ["bh"]={'bho','en'},
  ["bi"]={'en','en'},
  ["bjn"]={'id','en'},
  ["bm"]={'fr','en'},
  ["bpy"]={'bn','en'},
  ["bqi"]={'fa','en'},
  ["br"]={'fr','en'},
  ["btm"]={'id','en'},
  ["bug"]={'id','en'},
  ["bxr"]={'ru','en'},
  ["ca"]={'oc','en'},
  ["cbk-zam"]={'es','en'},
  ["cdo"]={'nan','zh-hant','en'},
  ["ce"]={'ru','en'},
  ["co"]={'it','en'},
  ["crh"]={'crh-latn','en'},
  ["crh-cyrl"]={'ru','en'},
  ["cs"]={'sk','en'},
  ["csb"]={'pl','en'},
  ["cv"]={'ru','en'},
  ["de-at"]={'de','en'},
  ["de-ch"]={'de','en'},
  ["de-formal"]={'de','en'},
  ["dsb"]={'hsb','de','en'},
  ["dtp"]={'ms','en'},
  ["dty"]={'ne','en'},
  ["egl"]={'it','en'},
  ["eml"]={'it','en'},
  ["en"]={},
  ["en-ca"]={'en','en'},
  ["en-gb"]={'en','en'},
  ["es-formal"]={'es','en'},
  ["ext"]={'es','en'},
  ["ff"]={'fr','en'},
  ["fit"]={'fi','en'},
  ["frc"]={'fr','en'},
  ["frp"]={'fr','en'},
  ["frr"]={'de','en'},
  ["fur"]={'it','en'},
  ["gag"]={'tr','en'},
  ["gan"]={'gan-hant','zh-hant','zh-hans','en'},
  ["gan-hans"]={'zh-hans','en'},
  ["gan-hant"]={'zh-hant','zh-hans','en'},
  ["gcr"]={'fr','en'},
  ["gl"]={'pt','en'},
  ["glk"]={'fa','en'},
  ["gn"]={'es','en'},
  ["gom"]={'gom-deva','en'},
  ["gom-deva"]={'hi','en'},
  ["gor"]={'id','en'},
  ["gsw"]={'de','en'},
  ["guc"]={'es','en'},
  ["hak"]={'zh-hant','en'},
  ["hif"]={'hif-latn','en'},
  ["hrx"]={'de','en'},
  ["hsb"]={'dsb','de','en'},
  ["ht"]={'fr','en'},
  ["hu-formal"]={'hu','en'},
  ["hyw"]={'hy','en'},
  ["ii"]={'zh-cn','zh-hans','en'},
  ["inh"]={'ru','en'},
  ["io"]={'eo','en'},
  ["iu"]={'ike-cans','en'},
  ["jam"]={'en','en'},
  ["jut"]={'da','en'},
  ["jv"]={'id','en'},
  ["kaa"]={'kk-latn','kk-cyrl','en'},
  ["kab"]={'fr','en'},
  ["kbd"]={'kbd-cyrl','en'},
  ["kbp"]={'fr','en'},
  ["khw"]={'ur','en'},
  ["kiu"]={'tr','en'},
  ["kjp"]={'my','en'},
  ["kk"]={'kk-cyrl','en'},
  ["kk-arab"]={'kk-cyrl','en'},
  ["kk-cn"]={'kk-arab','kk-cyrl','en'},
  ["kk-kz"]={'kk-cyrl','en'},
  ["kk-latn"]={'kk-cyrl','en'},
  ["kk-tr"]={'kk-latn','kk-cyrl','en'},
  ["kl"]={'da','en'},
  ["ko-kp"]={'ko','en'},
  ["koi"]={'ru','en'},
  ["krc"]={'ru','en'},
  ["krl"]={'fi','en'},
  ["ks"]={'ks-arab','en'},
  ["ksh"]={'de','en'},
  ["ku"]={'ku-latn','en'},
  ["ku-arab"]={'ckb','en'},
  ["kum"]={'ru','en'},
  ["kv"]={'ru','en'},
  ["lad"]={'es','en'},
  ["lb"]={'de','en'},
  ["lbe"]={'ru','en'},
  ["lez"]={'ru','az','en'},
  ["li"]={'nl','en'},
  ["lij"]={'it','en'},
  ["liv"]={'et','en'},
  ["lki"]={'fa','en'},
  ["lld"]={'it','rm','fur','en'},
  ["lmo"]={'pms','eml','lij','vec','it','en'},
  ["ln"]={'fr','en'},
  ["lrc"]={'fa','en'},
  ["ltg"]={'lv','en'},
  ["luz"]={'fa','en'},
  ["lzh"]={'zh-hant','en'},
  ["lzz"]={'tr','en'},
  ["mad"]={'id','en'},
  ["mai"]={'hi','en'},
  ["map-bms"]={'jv','id','en'},
  ["mdf"]={'myv','ru','en'},
  ["mg"]={'fr','en'},
  ["mhr"]={'mrj','ru','en'},
  ["min"]={'id','en'},
  ["mnw"]={'my','en'},
  ["mo"]={'ro','en'},
  ["mrj"]={'mhr','ru','en'},
  ["ms-arab"]={'ms','en'},
  ["mwl"]={'pt','en'},
  ["myv"]={'mdf','ru','en'},
  ["mzn"]={'fa','en'},
  ["nah"]={'es','en'},
  ["nan"]={'cdo','zh-hant','en'},
  ["nap"]={'it','en'},
  ["nb"]={'nn','en'},
  ["nds"]={'de','en'},
  ["nds-nl"]={'nl','en'},
  ["nia"]={'id','en'},
  ["nl-informal"]={'nl','en'},
  ["nn"]={'nb','en'},
  ["nrm"]={'fr','en'},
  ["oc"]={'ca','fr','en'},
  ["olo"]={'fi','en'},
  ["os"]={'ru','en'},
  ["pcd"]={'fr','en'},
  ["pdc"]={'de','en'},
  ["pdt"]={'de','en'},
  ["pfl"]={'de','en'},
  ["pih"]={'en','en'},
  ["pms"]={'it','en'},
  ["pnt"]={'el','en'},
  ["pt"]={'pt-br','en'},
  ["pt-br"]={'pt','en'},
  ["pwn"]={'zh-tw','zh-hant','en'},
  ["qu"]={'qug','es','en'},
  ["qug"]={'qu','es','en'},
  ["rgn"]={'it','en'},
  ["rmy"]={'ro','en'},
  ["roa-tara"]={'it','en'},
  ["rue"]={'uk','ru','en'},
  ["rup"]={'ro','en'},
  ["ruq"]={'ruq-latn','ro','en'},
  ["ruq-cyrl"]={'mk','en'},
  ["ruq-latn"]={'ro','en'},
  ["sa"]={'hi','en'},
  ["sah"]={'ru','en'},
  ["scn"]={'it','en'},
  ["sco"]={'en','en'},
  ["sdc"]={'it','en'},
  ["sdh"]={'cbk','fa','en'},
  ["ses"]={'fr','en'},
  ["sg"]={'fr','en'},
  ["sgs"]={'lt','en'},
  ["sh"]={'bs','sr-el','hr','en'},
  ["shi"]={'fr','en'},
  ["shy"]={'shy-latn','en'},
  ["shy-latn"]={'fr','en'},
  ["sk"]={'cs','en'},
  ["skr"]={'skr-arab','en'},
  ["skr-arab"]={'ur','pnb','en'},
  ["sli"]={'de','en'},
  ["smn"]={'fi','en'},
  ["smn"]={'fi','en'},
  ["sr"]={'sr-ec','en'},
  ["srn"]={'nl','en'},
  ["stq"]={'de','en'},
  ["sty"]={'ru','en'},
  ["su"]={'id','en'},
  ["szl"]={'pl','en'},
  ["szy"]={'zh-tw','zh-hant','zh-hans','en'},
  ["tay"]={'zh-tw','zh-hant','zh-hans','en'},
  ["tcy"]={'kn','en'},
  ["tet"]={'pt','en'},
  ["tg"]={'tg-cyrl','en'},
  ["trv"]={'zh-tw','zh-hant','zh-hans','en'},
  ["tt"]={'tt-cyrl','ru','en'},
  ["tt-cyrl"]={'ru','en'},
  ["ty"]={'fr','en'},
  ["tyv"]={'ru','en'},
  ["udm"]={'ru','en'},
  ["ug"]={'ug-arab','en'},
  ["vec"]={'it','en'},
  ["vep"]={'et','en'},
  ["vls"]={'nl','en'},
  ["vmf"]={'de','en'},
  ["vot"]={'fi','en'},
  ["vro"]={'et','en'},
  ["wa"]={'fr','en'},
  ["wls"]={'fr','en'},
  ["wo"]={'fr','en'},
  ["wuu"]={'zh-hans','en'},
  ["xal"]={'ru','en'},
  ["xmf"]={'ka','en'},
  ["yi"]={'he','en'},
  ["za"]={'zh-hans','en'},
  ["zea"]={'nl','en'},
  ["zgh"]={'kab','en'},
  ["zh"]={'zh-hans','en'},
  ["zh-cn"]={'zh-hans','en'},
  ["zh-hant"]={'zh-hans','en'},
  ["zh-hk"]={'zh-hant','zh-hans','en'},
  ["zh-mo"]={'zh-hk','zh-hant','zh-hans','en'},
  ["zh-my"]={'zh-sg','zh-hans','en'},
  ["zh-sg"]={'zh-hans','en'},
  ["zh-tw"]={'zh-hant','zh-hans','en'},
}
local supported = {['ab']=true,['abs']=true,['ace']=true,['ady']=true,['ady-cyrl']=true,['aeb']=true,['aeb-arab']=true,['af']=true,['ak']=true,['aln']=true,['alt']=true,['am']=true,['ami']=true,['an']=true,['ang']=true,['anp']=true,['ar']=true,['arc']=true,['arn']=true,['arq']=true,['ary']=true,['arz']=true,['as']=true,['ast']=true,['atj']=true,['av']=true,['avk']=true,['awa']=true,['ay']=true,['az']=true,['azb']=true,['ba']=true,['ban']=true,['ban-bali']=true,['bar']=true,['bbc']=true,['bbc-latn']=true,['bcc']=true,['bci']=true,['bcl']=true,['be']=true,['be-tarask']=true,['bg']=true,['bgn']=true,['bh']=true,['bho']=true,['bi']=true,['bjn']=true,['bm']=true,['bn']=true,['bo']=true,['bpy']=true,['bqi']=true,['br']=true,['bs']=true,['btm']=true,['bug']=true,['bxr']=true,['ca']=true,['cbk-zam']=true,['cdo']=true,['ce']=true,['ceb']=true,['ch']=true,['ckb']=true,['co']=true,['crh']=true,['crh-cyrl']=true,['crh-latn']=true,['cs']=true,['csb']=true,['cu']=true,['cv']=true,['cy']=true,['da']=true,['dag']=true,['de']=true,['de-at']=true,['de-ch']=true,['de-formal']=true,['din']=true,['diq']=true,['dsb']=true,['dtp']=true,['dty']=true,['dv']=true,['dz']=true,['egl']=true,['el']=true,['eml']=true,['en']=true,['en-ca']=true,['en-gb']=true,['en-rtl']=true,['eo']=true,['es']=true,['es-formal']=true,['et']=true,['eu']=true,['ext']=true,['fa']=true,['ff']=true,['fi']=true,['fit']=true,['fo']=true,['fr']=true,['frc']=true,['frp']=true,['frr']=true,['fur']=true,['fy']=true,['ga']=true,['gag']=true,['gan']=true,['gan-hans']=true,['gan-hant']=true,['gcr']=true,['gd']=true,['gl']=true,['glk']=true,['gn']=true,['gom']=true,['gom-deva']=true,['gor']=true,['got']=true,['grc']=true,['gsw']=true,['gu']=true,['guc']=true,['guw']=true,['gv']=true,['hak']=true,['haw']=true,['he']=true,['hi']=true,['hif']=true,['hif-latn']=true,['hr']=true,['hrx']=true,['hsb']=true,['ht']=true,['hu']=true,['hu-formal']=true,['hy']=true,['hyw']=true,['ia']=true,['id']=true,['ie']=true,['ig']=true,['ii']=true,['ilo']=true,['inh']=true,['io']=true,['is']=true,['it']=true,['iu']=true,['ja']=true,['jam']=true,['jbo']=true,['jut']=true,['jv']=true,['ka']=true,['kaa']=true,['kab']=true,['kbd']=true,['kbd-cyrl']=true,['kbp']=true,['kg']=true,['khw']=true,['kiu']=true,['kjp']=true,['kk']=true,['kk-arab']=true,['kk-cn']=true,['kk-cyrl']=true,['kk-kz']=true,['kk-latn']=true,['kk-tr']=true,['kl']=true,['km']=true,['kn']=true,['ko']=true,['ko-kp']=true,['koi']=true,['krc']=true,['krl']=true,['ks']=true,['ks-arab']=true,['ks-deva']=true,['ksh']=true,['ku']=true,['ku-arab']=true,['ku-latn']=true,['kum']=true,['kv']=true,['kw']=true,['ky']=true,['la']=true,['lad']=true,['lb']=true,['lbe']=true,['lez']=true,['lfn']=true,['li']=true,['lij']=true,['liv']=true,['lki']=true,['lld']=true,['lmo']=true,['ln']=true,['lo']=true,['lrc']=true,['lt']=true,['ltg']=true,['luz']=true,['lv']=true,['lzh']=true,['lzz']=true,['mad']=true,['mai']=true,['map-bms']=true,['mdf']=true,['mg']=true,['mhr']=true,['min']=true,['mk']=true,['ml']=true,['mn']=true,['mni']=true,['mnw']=true,['mo']=true,['mr']=true,['mrj']=true,['ms']=true,['ms-arab']=true,['mt']=true,['mwl']=true,['my']=true,['myv']=true,['mzn']=true,['nah']=true,['nan']=true,['nap']=true,['nb']=true,['nds']=true,['nds-nl']=true,['ne']=true,['new']=true,['nia']=true,['nl']=true,['nl-informal']=true,['nn']=true,['nqo']=true,['nrm']=true,['nso']=true,['nv']=true,['oc']=true,['ojb']=true,['olo']=true,['or']=true,['os']=true,['pa']=true,['pcd']=true,['pdc']=true,['pdt']=true,['pfl']=true,['pi']=true,['pih']=true,['pl']=true,['pms']=true,['pnb']=true,['pnt']=true,['ps']=true,['pt']=true,['pt-br']=true,['pwn']=true,['qu']=true,['qug']=true,['rgn']=true,['rm']=true,['rmc']=true,['rmy']=true,['ro']=true,['roa-tara']=true,['ru']=true,['rue']=true,['rup']=true,['ruq']=true,['ruq-cyrl']=true,['ruq-latn']=true,['rw']=true,['sa']=true,['sah']=true,['sat']=true,['sc']=true,['scn']=true,['sco']=true,['sd']=true,['sdc']=true,['sdh']=true,['se']=true,['ses']=true,['sg']=true,['sgs']=true,['sh']=true,['shi']=true,['shn']=true,['shy']=true,['shy-latn']=true,['si']=true,['sk']=true,['skr']=true,['skr-arab']=true,['sl']=true,['sli']=true,['smn']=true,['sq']=true,['sr']=true,['sr-ec']=true,['sr-el']=true,['srn']=true,['stq']=true,['sty']=true,['su']=true,['sv']=true,['sw']=true,['szl']=true,['szy']=true,['ta']=true,['tay']=true,['tcy']=true,['te']=true,['tet']=true,['tg']=true,['tg-cyrl']=true,['th']=true,['ti']=true,['tk']=true,['tl']=true,['tly']=true,['tpi']=true,['tr']=true,['trv']=true,['tt']=true,['tt-cyrl']=true,['tt-latn']=true,['ty']=true,['tyv']=true,['udm']=true,['ug']=true,['ug-arab']=true,['uk']=true,['ur']=true,['uz']=true,['vec']=true,['vep']=true,['vi']=true,['vls']=true,['vmf']=true,['vo']=true,['vot']=true,['vro']=true,['wa']=true,['war']=true,['wls']=true,['wo']=true,['wuu']=true,['xal']=true,['xmf']=true,['xsy']=true,['yi']=true,['yo']=true,['yue']=true,['za']=true,['zea']=true,['zgh']=true,['zh']=true,['zh-cn']=true,['zh-hans']=true,['zh-hant']=true,['zh-hk']=true,['zh-mo']=true,['zh-my']=true,['zh-sg']=true,['zh-tw']=true,}
local rtls = {["aeb"]=true,["aeb-arab"]=true,["ar"]=true,["arc"]=true,["arq"]=true,["ary"]=true,["arz"]=true,["azb"]=true,["bcc"]=true,["bgn"]=true,["bqi"]=true,["ckb"]=true,["dv"]=true,["fa"]=true,["glk"]=true,["he"]=true,["khw"]=true,["kk-arab"]=true,["kk-cn"]=true,["ks"]=true,["ks-arab"]=true,["ku-arab"]=true,["lki"]=true,["lrc"]=true,["luz"]=true,["ms-arab"]=true,["mzn"]=true,["nqo"]=true,["pnb"]=true,["ps"]=true,["sd"]=true,["sdh"]=true,["skr"]=true,["skr-arab"]=true,["ug"]=true,["ug-arab"]=true,["ur"]=true,["yi"]=true}
php.getContLangCode = function() return contLangCode end
php.isSupportedLanguage = function (code) return supported[code] or false end -- ok
php.isKnownLanguageTag = function(code) return php.isSupportedLanguage(code) end -- 99% ok
php.isValidCode = function(code) -- 99% ok, can be 100% by translating php
    local _, c = string.gsub(code, '[^a-zA-Z0-9-]', '')
    return c == 0
end
php.isValidBuiltInCode = function(code) return php.isSupportedLanguage(code) end -- 99% ok
php.fetchLanguageName = function(code, inLanguage) return localLanguageNames[code] end
php.fetchLanguageNames = function(inLanguage, include) return localLanguageNames end
php.getFallbacksFor = function(code) return fallbacks[code] or {'en'} end -- 99% ok, zh-min-nan different from nan is true in mediawiki
php.isRTL = function(code) return rtls[code] or false end -- ok
php.lc = function(code, s) -- comp
    return mw.ustring.lower(s)
end
php.lcfirst = function(code, s) -- comp
    return mw.ustring.lower(mw.ustring.sub(s, 1, 1)) .. mw.ustring.sub(s, 2)
end
php.uc = function(code, s) -- comp
    return mw.ustring.upper(s)
end
php.ucfirst = function(code, s) -- comp
    return mw.ustring.upper(mw.ustring.sub(s, 1, 1)) .. mw.ustring.sub(s, 2)
end
php.caseFold = function(code, s) -- comp
    return php.lc(code, s)
end
php.formatNum = function(code, n, options)
    if type(options) == 'table' and options['noCommafy'] then
        return tostring(n)
    else
        return tostring(n)
    end
end
php.formatDate = function(code, format, timestamp, lc) -- lc means local -- comp
    timestamp = timestamp or os.time()
    return os.date(format, timestamp)
end
php.formatDuration = function(code, seconds, chosenIntervals) -- comp
    -- chosenIntervals
    local millennium, century, decade, year, day, hour, minute, second
    local mi1, c1, de1, y1, d1, h1, m1, s1
    local mi2, c2, de2, y2, d2, h2, m2, s2
    mi1, c1, de1, y1, d1, h1, m1, s1 = 'millennium', 'century', 'decade', 'year', 'day', 'hour', 'minute', 'second'
    mi2, c2, de2, y2, d2, h2, m2, s2 = 'millennia', 'centuries', 'decades', 'years', 'days', 'hours', 'minutes', 'seconds'
    return seconds .. s2
end
php.parseFormattedNumber = function(code, s) -- comp for en
    return tonumber(s)
end
-- see also https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html
php.convertPlural = function(code, n, forms, ...) -- comp for en, zh
    if type(forms) ~= 'table' then
        forms = { forms, ... } -- use arg to access ... as table
    end
    local c = #forms
    if c == 1 then
        return forms[1]
    elseif n == 1 or n == -1 then
        return forms[1]
    else
        return forms[2]
    end
end
php.convertGrammar = function(code, word, case) -- comp
    return word
end
php.gender = function(code, what, masculine, feminine, neutral) -- comp
    if type(masculine) == 'table' then
        masculine, feminine, neutral = masculine[1], masculine[2], masculine[3]
    end
    if code == 'male' then
        return masculine
    elseif code == 'female' then
        return feminine
    else
        return neutral
    end
end
php.check = function(what, data) return false end -- bliki
php.plain = function(data) -- bliki
    local t = {}
    t.useDB = data['useDB'] or false
    t.lang = data['lang'] or php.opts.lang
    t.keys = data['keys'] or {}
    t.params = data['params'] or {}
    t.rawMessage = data['rawMessage'] or ""
    local m = t.rawMessage
    local p = t.params
    for i = #p, 1, -1 do
        local from = '$' .. i
        local to = p[i]
        if type(to) == 'table' then
            to = p['raw'] or p['num'] or 'unknown'
        end
        m = string.gsub(m, from, to)
    end
    return m
end

return php

-- inspired by https://github.com/axkr/info.bliki.wikipedia_parser/bliki-core/src/main/java/info/bliki/extensions/scribunto/engine/lua/interfaces/MwLanguage.java
